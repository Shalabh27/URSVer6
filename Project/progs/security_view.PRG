Create View lv_security_screens As ;
Select ;
   Upper(Padr(a.descript,60)) As descript,;
   Transform(a.order,'@l 99  ') As disp_number, ;
   a.module, ;
   cScheme_id As scheme_id, ;
   Space(10) As screen_id, ;
   .f. As has_add, ;
   .f. As has_edit, ;
   .f. As has_delete, ;
   .f. As has_access,;
   .f. As view_only, ;
   .f. As addenable, ;
   .f. As editenable,;
   .f. As delenable,;
   .t. As rowheading,;
   .f. As err_condition, ;
   .f. As changed ;
From modules a ;
Where ;
   a.available ;
Union ;
Select ;
   Padr("   "+Iif(gcstate="NY",g.descript, g.descript1),60) As descript,;
   Transform(b.order,'@l 99')+Transform(g.order,'@l 99') As disp_number, ;
   g.module, ;
   c.scheme_id,;
   g.id as screen_id, ;
   g.has_add, ;
   g.has_edit, ;
   g.has_delete,;
   c.has_access,;
   Iif(c.has_access And !c.addenable And !c.editenable And !c.delenable,.t.,.f.) As view_only, ;
   c.addenable, ;
   c.editenable,;
   c.delenable, ;
   .f. As rowheading, ;
   .f. As err_condition, ;
   .f. As changed ;
From ;
   screens g ;
Join modules b On g.module==b.module ;
Join skipbar c On g.id=c.screen_id ;
where ;
   c.scheme_id=cScheme_id And ;
   b.available And ;
   g.available And ;
   Iif(gcstate="NY",!Empty(g.descript),!Empty(g.descript1)) ;
Order By disp_number